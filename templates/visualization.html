<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vajra Stream - Sacred Visualization Gallery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: 40px;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 3em;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #b0b0b0;
            font-size: 1.2em;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .viz-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .viz-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .viz-card h2 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .viz-card p {
            color: #b0b0b0;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .viz-image {
            width: 100%;
            border-radius: 10px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #1a1a2e;
            text-decoration: none;
            border-radius: 25px;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.5);
        }

        .btn:active {
            transform: scale(0.95);
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #FFD700;
            display: none;
        }

        .spinner {
            border: 4px solid rgba(255, 215, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #FFD700;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: relative;
            margin: 50px auto;
            max-width: 90%;
            max-height: 90vh;
            text-align: center;
        }

        .modal-content img {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 10px;
            box-shadow: 0 10px 50px rgba(255, 215, 0, 0.5);
        }

        .close {
            position: absolute;
            top: -40px;
            right: 0;
            color: #FFD700;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: #FFA500;
        }

        footer {
            text-align: center;
            padding: 30px;
            color: #808080;
            margin-top: 40px;
        }

        .om-symbol {
            font-size: 2em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî± Vajra Stream</h1>
            <p class="subtitle">Sacred Visualization Gallery</p>
            <p class="subtitle">Browser-Based Healing Technology</p>
        </header>

        <div class="gallery">
            <!-- Chakra System -->
            <div class="viz-card" onclick="loadVisualization('chakras', '/api/v1/visualization/chakras?width=1200&height=1600')">
                <h2>üåà Chakra System</h2>
                <p>Visualize the seven primary chakras and their energetic properties. Each chakra is displayed with its associated color, Sanskrit name, and energetic significance.</p>
                <button class="btn">Generate Chakra Diagram</button>
                <div class="loading" id="loading-chakras">
                    <div class="spinner"></div>
                    <p>Generating chakra visualization...</p>
                </div>
                <img class="viz-image" id="img-chakras" style="display:none;" />
            </div>

            <!-- Meridian System -->
            <div class="viz-card" onclick="loadVisualization('meridians', '/api/v1/visualization/meridians?width=1200&height=1600')">
                <h2>‚ö° Meridian System</h2>
                <p>Display the Traditional Chinese Medicine meridian system, showing the pathways of Qi energy through the body's energetic channels.</p>
                <button class="btn">Generate Meridian Map</button>
                <div class="loading" id="loading-meridians">
                    <div class="spinner"></div>
                    <p>Generating meridian visualization...</p>
                </div>
                <img class="viz-image" id="img-meridians" style="display:none;" />
            </div>

            <!-- Rothko Art -->
            <div class="viz-card" onclick="loadVisualization('rothko', '/api/v1/visualization/rothko?width=1920&height=1080')">
                <h2>üé® Rothko Abstract Art</h2>
                <p>Generate healing abstract art in the style of Mark Rothko, using sacred color harmonies and energetic resonance fields.</p>
                <button class="btn">Generate Rothko Art</button>
                <div class="loading" id="loading-rothko">
                    <div class="spinner"></div>
                    <p>Generating Rothko artwork...</p>
                </div>
                <img class="viz-image" id="img-rothko" style="display:none;" />
            </div>

            <!-- Sacred Geometry - Flower of Life -->
            <div class="viz-card" onclick="loadVisualization('flower', '/api/v1/visualization/sacred-geometry/flower_of_life?size=800')">
                <h2>üå∏ Flower of Life</h2>
                <p>The ancient symbol containing the patterns of creation. Found in sacred sites worldwide, representing the fundamental forms of space and time.</p>
                <button class="btn">Generate Flower of Life</button>
                <div class="loading" id="loading-flower">
                    <div class="spinner"></div>
                    <p>Generating sacred geometry...</p>
                </div>
                <img class="viz-image" id="img-flower" style="display:none;" />
            </div>

            <!-- Sacred Geometry - Metatron's Cube -->
            <div class="viz-card" onclick="loadVisualization('metatron', '/api/v1/visualization/sacred-geometry/metatrons_cube?size=800')">
                <h2>üìê Metatron's Cube</h2>
                <p>Contains all five Platonic Solids representing the building blocks of the universe. A powerful symbol of divine geometry and cosmic order.</p>
                <button class="btn">Generate Metatron's Cube</button>
                <div class="loading" id="loading-metatron">
                    <div class="spinner"></div>
                    <p>Generating sacred geometry...</p>
                </div>
                <img class="viz-image" id="img-metatron" style="display:none;" />
            </div>

            <!-- Healing Mandala -->
            <div class="viz-card" onclick="loadVisualization('mandala', '/api/v1/visualization/mandala?size=1000&intention=healing')">
                <h2>üïâÔ∏è Healing Mandala</h2>
                <p>Create a sacred mandala with healing intention, combining color therapy, sacred geometry, and energetic resonance for deep transformation.</p>
                <button class="btn">Generate Mandala</button>
                <div class="loading" id="loading-mandala">
                    <div class="spinner"></div>
                    <p>Generating healing mandala...</p>
                </div>
                <img class="viz-image" id="img-mandala" style="display:none;" />
            </div>

            <!-- Energy Field -->
            <div class="viz-card" onclick="loadVisualization('energy', '/api/v1/visualization/energy-field?field_type=aura&width=800&height=800')">
                <h2>‚ú® Energy Field (Aura)</h2>
                <p>Visualize the human energy field and auric layers, showing the subtle energetic emanations surrounding the physical body.</p>
                <button class="btn">Generate Energy Field</button>
                <div class="loading" id="loading-energy">
                    <div class="spinner"></div>
                    <p>Generating energy field...</p>
                </div>
                <img class="viz-image" id="img-energy" style="display:none;" />
            </div>

            <!-- Sri Yantra -->
            <div class="viz-card" onclick="loadVisualization('sri_yantra', '/api/v1/visualization/sacred-geometry/sri_yantra?size=800')">
                <h2>üî∫ Sri Yantra</h2>
                <p>The supreme yantra, representing the union of masculine and feminine divine energy. Used for meditation and manifestation.</p>
                <button class="btn">Generate Sri Yantra</button>
                <div class="loading" id="loading-sri_yantra">
                    <div class="spinner"></div>
                    <p>Generating sacred geometry...</p>
                </div>
                <img class="viz-image" id="img-sri_yantra" style="display:none;" />
            </div>
        </div>

        <footer>
            <div class="om-symbol">üïâÔ∏è</div>
            <p>Vajra Stream - Sacred Technology for Healing & Liberation</p>
            <p>May all beings benefit from these visualizations</p>
            <p style="margin-top: 20px; font-size: 0.9em;">
                <a href="/docs" style="color: #FFD700; text-decoration: none;">API Documentation</a> |
                <a href="/" style="color: #FFD700; text-decoration: none;">API Root</a>
            </p>
        </footer>
    </div>

    <!-- Modal for full-size viewing -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modalImage" />
        </div>
    </div>

    <script>
        function loadVisualization(id, url) {
            const loadingEl = document.getElementById(`loading-${id}`);
            const imgEl = document.getElementById(`img-${id}`);

            // Show loading spinner
            loadingEl.style.display = 'block';
            imgEl.style.display = 'none';

            // Add timestamp to prevent caching
            const urlWithTimestamp = url + (url.includes('?') ? '&' : '?') + 't=' + new Date().getTime();

            // Create new image to load
            const newImg = new Image();
            newImg.onload = function() {
                imgEl.src = urlWithTimestamp;
                imgEl.style.display = 'block';
                loadingEl.style.display = 'none';

                // Add click handler to open in modal
                imgEl.onclick = function(e) {
                    e.stopPropagation();
                    openModal(urlWithTimestamp);
                };
            };
            newImg.onerror = function() {
                loadingEl.innerHTML = '<p style="color: #ff6b6b;">Error loading visualization. Please ensure PIL/Pillow is installed.</p>';
            };
            newImg.src = urlWithTimestamp;
        }

        function openModal(imageSrc) {
            document.getElementById('modalImage').src = imageSrc;
            document.getElementById('imageModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
